!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.synaptic=e():t.synaptic=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(n(6)),s=r(n(2)),c=r(n(1)),u={ALL_TO_ALL:"ALL TO ALL",ONE_TO_ONE:"ONE TO ONE",ALL_TO_ELSE:"ALL TO ELSE"},l={INPUT:"INPUT",OUTPUT:"OUTPUT",ONE_TO_ONE:"ONE TO ONE"},h=function(){function t(e){for(i(this,t),this.size=0|e,this.list=[],this.connectedTo=[];e--;){var n=new s.default;this.list.push(n)}}return o(t,[{key:"activate",value:function(t){var e=[];if(void 0!==t){if(t.length!=this.size)throw new Error("INPUT size and LAYER size must be the same to activate!");for(var n in this.list){i=(r=this.list[n]).activate(t[n]);e.push(i)}}else for(var n in this.list){var r=this.list[n],i=r.activate();e.push(i)}return e}},{key:"propagate",value:function(t,e){if(void 0!==e){if(e.length!=this.size)throw new Error("TARGET size and LAYER size must be the same to propagate!");for(n=this.list.length-1;n>=0;n--)(r=this.list[n]).propagate(t,e[n])}else for(var n=this.list.length-1;n>=0;n--){var r=this.list[n];r.propagate(t)}}},{key:"project",value:function(e,n,r){if(e instanceof c.default&&(e=e.layers.input),!(e instanceof t))throw new Error("Invalid argument, you can only project connections to LAYERS and NETWORKS!");if(!this.connected(e))return new a.default(this,e,n,r)}},{key:"gate",value:function(e,n){if(n==t.gateType.INPUT){if(e.to.size!=this.size)throw new Error("GATER layer and CONNECTION.TO layer must be the same size in order to gate!");for(var r in e.to.list){var i=e.to.list[r],o=this.list[r];for(var a in i.connections.inputs)(c=i.connections.inputs[a]).ID in e.connections&&o.gate(c)}}else if(n==t.gateType.OUTPUT){if(e.from.size!=this.size)throw new Error("GATER layer and CONNECTION.FROM layer must be the same size in order to gate!");for(var r in e.from.list){var i=e.from.list[r],o=this.list[r];for(var s in i.connections.projected)(c=i.connections.projected[s]).ID in e.connections&&o.gate(c)}}else if(n==t.gateType.ONE_TO_ONE){if(e.size!=this.size)throw new Error("The number of GATER UNITS must be the same as the number of CONNECTIONS to gate!");for(var r in e.list){var o=this.list[r],c=e.list[r];o.gate(c)}}e.gatedfrom.push({layer:this,type:n})}},{key:"selfconnected",value:function(){for(var t in this.list)if(!this.list[t].selfconnected())return!1;return!0}},{key:"connected",value:function(e){var n=0;for(var r in this.list)for(var i in e.list){var o=this.list[r],a=e.list[i],s=o.connected(a);"projected"==s.type&&n++}if(n==this.size*e.size)return t.connectionType.ALL_TO_ALL;n=0;for(var c in this.list){var o=this.list[c],a=e.list[c],s=o.connected(a);"projected"==s.type&&n++}return n==this.size?t.connectionType.ONE_TO_ONE:void 0}},{key:"clear",value:function(){for(var t in this.list)this.list[t].clear()}},{key:"reset",value:function(){for(var t in this.list)this.list[t].reset()}},{key:"neurons",value:function(){return this.list}},{key:"add",value:function(t){this.neurons[t.ID]=t||new s.default,this.list.push(t),this.size++}},{key:"set",value:function(t){t=t||{};for(var e in this.list){var n=this.list[e];t.label&&(n.label=t.label+"_"+n.ID),t.squash&&(n.squash=t.squash),t.bias&&(n.bias=t.bias)}return this}}]),t}();h.connectionType=u,h.gateType=l,e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=r(n(2)),c=r(n(0)),u=r(n(3)),l=function(){function t(e){i(this,t),void 0!==e&&(this.layers={input:e.input||null,hidden:e.hidden||[],output:e.output||null},this.optimized=null)}return a(t,[{key:"activate",value:function(t){if(!1===this.optimized){this.layers.input.activate(t);for(var e=0;e<this.layers.hidden.length;e++)this.layers.hidden[e].activate();return this.layers.output.activate()}return null==this.optimized&&this.optimize(),this.optimized.activate(t)}},{key:"propagate",value:function(t,e){if(!1===this.optimized){this.layers.output.propagate(t,e);for(var n=this.layers.hidden.length-1;n>=0;n--)this.layers.hidden[n].propagate(t)}else null==this.optimized&&this.optimize(),this.optimized.propagate(t,e)}},{key:"project",value:function(e,n,r){if(this.optimized&&this.optimized.reset(),e instanceof t)return this.layers.output.project(e.layers.input,n,r);if(e instanceof c.default)return this.layers.output.project(e,n,r);throw new Error("Invalid argument, you can only project connections to LAYERS and NETWORKS!")}},{key:"gate",value:function(t,e){this.optimized&&this.optimized.reset(),this.layers.output.gate(t,e)}},{key:"clear",value:function(){this.restore();var t=this.layers.input,e=this.layers.output;t.clear();for(var n=0;n<this.layers.hidden.length;n++)this.layers.hidden[n].clear();e.clear(),this.optimized&&this.optimized.reset()}},{key:"reset",value:function(){this.restore();var t=this.layers.input,e=this.layers.output;t.reset();for(var n=0;n<this.layers.hidden.length;n++)this.layers.hidden[n].reset();e.reset(),this.optimized&&this.optimized.reset()}},{key:"optimize",value:function(){for(var t=this,e={},n=this.neurons(),r=0;r<n.length;r++){for(var i=n[r].neuron,o=n[r].layer;i.neuron;)i=i.neuron;e=i.optimize(e,o)}for(r=0;r<e.propagation_sentences.length;r++)e.propagation_sentences[r].reverse();e.propagation_sentences.reverse();var a="";a+="var F = Float64Array ? new Float64Array("+e.memory+") : []; ";for(var r in e.variables)a+="F["+e.variables[r].id+"] = "+(e.variables[r].value||0)+"; ";a+="var activate = function(input){\n";for(r=0;r<e.inputs.length;r++)a+="F["+e.inputs[r]+"] = input["+r+"]; ";for(r=0;r<e.activation_sentences.length;r++)if(e.activation_sentences[r].length>0)for(s=0;s<e.activation_sentences[r].length;s++)a+=e.activation_sentences[r][s].join(" "),a+=e.trace_sentences[r][s].join(" ");a+=" var output = []; ";for(r=0;r<e.outputs.length;r++)a+="output["+r+"] = F["+e.outputs[r]+"]; ";a+="return output; }; ",a+="var propagate = function(rate, target){\n",a+="F["+e.variables.rate.id+"] = rate; ";for(r=0;r<e.targets.length;r++)a+="F["+e.targets[r]+"] = target["+r+"]; ";for(r=0;r<e.propagation_sentences.length;r++)for(var s=0;s<e.propagation_sentences[r].length;s++)a+=e.propagation_sentences[r][s].join(" ")+" ";a+=" };\n",a+="var ownership = function(memoryBuffer){\nF = memoryBuffer;\nthis.memory = F;\n};\n",a=(a+="return {\nmemory: F,\nactivate: activate,\npropagate: propagate,\nownership: ownership\n};").split(";").join(";\n");var c=new Function(a)();c.data={variables:e.variables,activate:e.activation_sentences,propagate:e.propagation_sentences,trace:e.trace_sentences,inputs:e.inputs,outputs:e.outputs,check_activation:this.activate,check_propagation:this.propagate},c.reset=function(){t.optimized&&(t.optimized=null,t.activate=c.data.check_activation,t.propagate=c.data.check_propagation)},this.optimized=c,this.activate=c.activate,this.propagate=c.propagate}},{key:"restore",value:function(){if(this.optimized)for(var t=this.optimized,e=(function(){var e=Array.prototype.slice.call(arguments),n=e.shift(),r=e.pop()+"_";for(var i in e)r+=e[i]+"_";r+=n.ID;var o=t.memory,a=t.data.variables;return r in a?o[a[r].id]:0}),n=this.neurons(),r=0;r<n.length;r++){for(var i=n[r].neuron;i.neuron;)i=i.neuron;i.state=e(i,"state"),i.old=e(i,"old"),i.activation=e(i,"activation"),i.bias=e(i,"bias");for(var o in i.trace.elegibility)i.trace.elegibility[o]=e(i,"trace","elegibility",o);for(var a in i.trace.extended)for(var o in i.trace.extended[a])i.trace.extended[a][o]=e(i,"trace","extended",a,o);for(var s in i.connections.projected){var c=i.connections.projected[s];c.weight=e(c,"weight"),c.gain=e(c,"gain")}}}},{key:"neurons",value:function(){for(var t=[],e=this.layers.input.neurons(),n=this.layers.output.neurons(),r=0;r<e.length;r++)t.push({neuron:e[r],layer:"input"});for(r=0;r<this.layers.hidden.length;r++)for(var i=this.layers.hidden[r].neurons(),o=0;o<i.length;o++)t.push({neuron:i[o],layer:r});for(r=0;r<n.length;r++)t.push({neuron:n[r],layer:"output"});return t}},{key:"inputs",value:function(){return this.layers.input.size}},{key:"outputs",value:function(){return this.layers.output.size}},{key:"set",value:function(t){this.layers={input:t.input||null,hidden:t.hidden||[],output:t.output||null},this.optimized&&this.optimized.reset()}},{key:"setOptimize",value:function(t){this.restore(),this.optimized&&this.optimized.reset(),this.optimized=!!t&&null}},{key:"toJSON",value:function(t){this.restore();for(var e=this.neurons(),n=[],r=[],i={},o=0;o<e.length;o++){for(c=e[o].neuron;c.neuron;)c=c.neuron;i[c.ID]=o;var a={trace:{elegibility:{},extended:{}},state:c.state,old:c.old,activation:c.activation,bias:c.bias,layer:e[o].layer};a.squash=c.squash==s.default.squash.LOGISTIC?"LOGISTIC":c.squash==s.default.squash.TANH?"TANH":c.squash==s.default.squash.IDENTITY?"IDENTITY":c.squash==s.default.squash.HLIM?"HLIM":c.squash==s.default.squash.RELU?"RELU":null,n.push(a)}for(o=0;o<e.length;o++){for(var c=e[o].neuron;c.neuron;)c=c.neuron;for(var u in c.connections.projected){var l=c.connections.projected[u];r.push({from:i[l.from.ID],to:i[l.to.ID],weight:l.weight,gater:l.gater?i[l.gater.ID]:null})}c.selfconnected()&&r.push({from:i[c.ID],to:i[c.ID],weight:c.selfconnection.weight,gater:c.selfconnection.gater?i[c.selfconnection.gater.ID]:null})}return{neurons:n,connections:r}}},{key:"toDot",value:function(t){(void 0===t?"undefined":o(t))||(t=!1);for(var e="digraph nn {\n    rankdir = BT\n",n=[this.layers.input].concat(this.layers.hidden,this.layers.output),r=0;r<n.length;r++)for(var i=0;i<n[r].connectedTo.length;i++){var a=n[r].connectedTo[i],s=a.to,c=a.size,u=n.indexOf(n[r]),l=n.indexOf(s);if(t){if(a.gatedfrom.length){var h="fake"+u+"_"+l;e+="    "+h+' [label = "", shape = point, width = 0.01, height = 0.01]\n',e+="    "+u+" -> "+h+" [label = "+c+", arrowhead = none]\n",e+="    "+h+" -> "+l+"\n"}else e+="    "+u+" -> "+l+" [label = "+c+"]\n";for(var f in a.gatedfrom){p=a.gatedfrom[f].layer;e+="    "+(d=n.indexOf(p))+" -> "+h+" [color = blue]\n"}}else{e+="    "+u+" -> "+l+" [label = "+c+"]\n";for(var f in a.gatedfrom){var p=a.gatedfrom[f].layer,d=n.indexOf(p);e+="    "+d+" -> "+l+" [color = blue]\n"}}}return e+="}\n",{code:e,link:"https://chart.googleapis.com/chart?chl="+escape(e.replace("/ /g","+"))+"&cht=gv"}}},{key:"standalone",value:function(){this.optimized||this.optimize();for(var t=this.optimized.data,e="function (input) {\n",n=0;n<t.inputs;n++)e+="F["+t.inputs[n]+"] = input["+n+"];\n";for(n=0;n<t.activate.length;n++)for(var r=0;r<t.activate[n].length;r++)e+=t.activate[n][r].join("")+"\n";e+="var output = [];\n";for(n=0;n<t.outputs.length;n++)e+="output["+n+"] = F["+t.outputs[n]+"];\n";for(var i=(e+="return output;\n}").match(/F\[(\d+)\]/g),o=0,a={},n=0;n<i.length;n++){var s=i[n].match(/\d+/)[0];s in a||(a[s]=o++)}var c="F = {\n";for(var n in a)c+=a[n]+": "+this.optimized.memory[n]+",\n";return c=c.substring(0,c.length-2)+"\n};\n",c="var run = "+e.replace(/F\[(\d+)]/g,function(t){return"F["+a[t.match(/\d+/)[0]]+"]"}).replace("{\n","{\n"+c)+";\n",c+="return run",new Function(c)()}},{key:"worker",value:function(e,n,r){var i={};r&&(i=r),i.rate=r.rate||.2,i.iterations=r.iterations||1e5,i.error=r.error||.005,i.cost=r.cost||null,i.crossValidate=r.crossValidate||null,costFunction="var cost = "+(r&&r.cost||this.cost||u.default.cost.MSE)+";\n";var o=t.getWorkerSharedFunctions();o=(o=(o=(o=o.replace(/var cost = options && options\.cost \|\| this\.cost \|\| Trainer\.cost\.MSE;/g,costFunction)).replace("return results;",'postMessage({action: "done", message: results, memoryBuffer: F}, [F.buffer]);')).replace("console.log('iterations', iterations, 'error', error, 'rate', currentRate)","postMessage({action: 'log', message: {\niterations: iterations,\nerror: error,\nrate: currentRate\n}\n})")).replace("abort = this.schedule.do({ error: error, iterations: iterations, rate: currentRate })","postMessage({action: 'schedule', message: {\niterations: iterations,\nerror: error,\nrate: currentRate\n}\n})"),this.optimized||this.optimize();var a="var inputs = "+this.optimized.data.inputs.length+";\n";a+="var outputs = "+this.optimized.data.outputs.length+";\n",a+="var F =  new Float64Array(["+this.optimized.memory.toString()+"]);\n",a+="var activate = "+this.optimized.activate.toString()+";\n",a+="var propagate = "+this.optimized.propagate.toString()+";\n";var s=o+"\n"+(a+="onmessage = function(e) {\nif (e.data.action == 'startTraining') {\ntrain("+JSON.stringify(n)+","+JSON.stringify(i)+");\n}\n}"),c=new Blob([s]),l=window.URL.createObjectURL(c);return new Worker(l)}},{key:"clone",value:function(){return t.fromJSON(this.toJSON())}}],[{key:"getWorkerSharedFunctions",value:function(){if(void 0!==t._SHARED_WORKER_FUNCTIONS)return t._SHARED_WORKER_FUNCTIONS;var e=u.default.prototype.train.toString();e=e.replace("function (set","function train(set")+"\n";var n=u.default.prototype._trainSet.toString().replace(/this.network./g,"");n=(n=(n=n.replace("function (set","function _trainSet(set")+"\n").replace("this.crossValidate","crossValidate")).replace("crossValidate = true","crossValidate = { }");var r=u.default.prototype.test.toString().replace(/this.network./g,"");return r=r.replace("function (set","function test(set")+"\n",t._SHARED_WORKER_FUNCTIONS=e+n+r}},{key:"fromJSON",value:function(e){for(var n=[],r={input:new c.default,hidden:[],output:new c.default},i=0;i<e.neurons.length;i++){var o=e.neurons[i],a=new s.default;a.trace.elegibility={},a.trace.extended={},a.state=o.state,a.old=o.old,a.activation=o.activation,a.bias=o.bias,a.squash=o.squash in s.default.squash?s.default.squash[o.squash]:s.default.squash.LOGISTIC,n.push(a),"input"==o.layer?r.input.add(a):"output"==o.layer?r.output.add(a):(void 0===r.hidden[o.layer]&&(r.hidden[o.layer]=new c.default),r.hidden[o.layer].add(a))}for(i=0;i<e.connections.length;i++){var u=n[(o=e.connections[i]).from],l=n[o.to],h=o.weight,f=n[o.gater],p=u.project(l,h);f&&f.gate(p)}return new t(r)}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(5),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=0,c={LOGISTIC:function(t,e){var n=1/(1+Math.exp(-t));return e?n*(1-n):n},TANH:function(t,e){return e?1-Math.pow(Math.tanh(t),2):Math.tanh(t)},IDENTITY:function(t,e){return e?1:t},HLIM:function(t,e){return e?1:t>0?1:0},RELU:function(t,e){return e?t>0?1:0:t>0?t:0}},u=function(){function t(){r(this,t),this.ID=t.uid(),this.connections={inputs:{},projected:{},gated:{}},this.error={responsibility:0,projected:0,gated:0},this.trace={elegibility:{},extended:{},influences:{}},this.state=0,this.old=0,this.activation=0,this.selfconnection=new a.default(this,this,0),this.squash=t.squash.LOGISTIC,this.neighboors={},this.bias=.2*Math.random()-.1}return i(t,[{key:"activate",value:function(t){if(void 0!==t)return this.activation=t,this.derivative=0,this.bias=0,this.activation;this.old=this.state,this.state=this.selfconnection.gain*this.selfconnection.weight*this.state+this.bias;for(var e in this.connections.inputs){t=this.connections.inputs[e];this.state+=t.from.activation*t.weight*t.gain}this.activation=this.squash(this.state),this.derivative=this.squash(this.state,!0);var n=[];for(var r in this.trace.extended){s=(a=this.neighboors[r]).selfconnection.gater==this?a.old:0;for(var i in this.trace.influences[a.ID])s+=this.trace.influences[a.ID][i].weight*this.trace.influences[a.ID][i].from.activation;n[a.ID]=s}for(var e in this.connections.inputs){var t=this.connections.inputs[e];this.trace.elegibility[t.ID]=this.selfconnection.gain*this.selfconnection.weight*this.trace.elegibility[t.ID]+t.gain*t.from.activation;for(var r in this.trace.extended){var o=this.trace.extended[r],a=this.neighboors[r],s=n[a.ID];o[t.ID]=a.selfconnection.gain*a.selfconnection.weight*o[t.ID]+this.derivative*this.trace.elegibility[t.ID]*s}}for(var c in this.connections.gated)this.connections.gated[c].gain=this.activation;return this.activation}},{key:"propagate",value:function(t,e){var n=0;if(void 0!==e)this.error.responsibility=this.error.projected=e-this.activation;else{for(var r in this.connections.projected){var i=this.connections.projected[r];n+=(c=i.to).error.responsibility*i.gain*i.weight}this.error.projected=this.derivative*n,n=0;for(var r in this.trace.extended){var o=(c=this.neighboors[r]).selfconnection.gater==this?c.old:0;for(var a in this.trace.influences[r])o+=this.trace.influences[r][a].weight*this.trace.influences[c.ID][a].from.activation;n+=c.error.responsibility*o}this.error.gated=this.derivative*n,this.error.responsibility=this.error.projected+this.error.gated}t=t||.1;for(var r in this.connections.inputs){var a=this.connections.inputs[r],s=this.error.projected*this.trace.elegibility[a.ID];for(var r in this.trace.extended){var c=this.neighboors[r];s+=c.error.responsibility*this.trace.extended[c.ID][a.ID]}a.weight+=t*s}this.bias+=t*this.error.responsibility}},{key:"project",value:function(t,e){if(t==this)return this.selfconnection.weight=1,this.selfconnection;var n=this.connected(t);if(n&&"projected"==n.type)return void 0!==e&&(n.connection.weight=e),n.connection;var r=new a.default(this,t,e);this.connections.projected[r.ID]=r,this.neighboors[t.ID]=t,t.connections.inputs[r.ID]=r,t.trace.elegibility[r.ID]=0;for(var i in t.trace.extended)t.trace.extended[i][r.ID]=0;return r}},{key:"gate",value:function(t){this.connections.gated[t.ID]=t;var e=t.to;if(!(e.ID in this.trace.extended)){this.neighboors[e.ID]=e;var n=this.trace.extended[e.ID]={};for(var r in this.connections.inputs)n[this.connections.inputs[r].ID]=0}e.ID in this.trace.influences?this.trace.influences[e.ID].push(t):this.trace.influences[e.ID]=[t],t.gater=this}},{key:"selfconnected",value:function(){return 0!==this.selfconnection.weight}},{key:"connected",value:function(t){var e={type:null,connection:!1};if(this==t)return!!this.selfconnected()&&(e.type="selfconnection",e.connection=this.selfconnection,e);for(var n in this.connections)for(var r in this.connections[n]){if((r=this.connections[n][r]).to==t)return e.type=n,e.connection=r,e;if(r.from==t)return e.type=n,e.connection=r,e}return!1}},{key:"clear",value:function(){for(var t in this.trace.elegibility)this.trace.elegibility[t]=0;for(var t in this.trace.extended)for(var e in this.trace.extended[t])this.trace.extended[t][e]=0;this.error.responsibility=this.error.projected=this.error.gated=0}},{key:"reset",value:function(){this.clear();for(var t in this.connections)for(var e in this.connections[t])this.connections[t][e].weight=.2*Math.random()-.1;this.bias=.2*Math.random()-.1,this.old=this.state=this.activation=0}},{key:"optimize",value:function(e,n){var r=[],i=[],o=[],a=(e=e||{}).memory||0,s=e.neurons||1,c=e.inputs||[],u=e.targets||[],l=e.outputs||[],h=e.variables||{},f=e.activation_sentences||[],p=e.trace_sentences||[],d=e.propagation_sentences||[],v=e.layers||{__count:0,__neuron:0},g=function(t){n in v&&t[v.__count]||(v.__count=t.push([])-1,v[n]=v.__count)};g(f),g(p),g(d);var y=v.__count,b=function(){var t=Array.prototype.slice.call(arguments);if(1==t.length){if("target"==t[0]){o="target_"+u.length;u.push(a)}else o=t[0];return o in h?h[o]:h[o]={value:0,id:a++}}var e=t.length>2;if(e)i=t.pop();var n=t.shift(),r=t.pop();if(!e)var i=n[r];for(var o=r+"_",s=0;s<t.length;s++)o+=t[s]+"_";return o+=n.ID,o in h?h[o]:h[o]={value:i,id:a++}},m=function(){for(var t=Array.prototype.slice.call(arguments),e=t.pop(),n="",r=0;r<t.length;r++)"string"==typeof t[r]?n+=t[r]:n+="F["+t[r].id+"]";e.push(n+";")},w=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},_=w(this.connections.projected),O=w(this.connections.gated),T="input"==n||w(this.connections.inputs),j="output"==n||_&&O,I=b("rate"),k=b(this,"activation");if(T)c.push(k.id);else{f[y].push(r),p[y].push(i),d[y].push(o);var E=b(this,"old"),D=b(this,"state"),z=b(this,"bias");if(this.selfconnection.gater)var S=b(this.selfconnection,"gain");if(this.selfconnected())var M=b(this.selfconnection,"weight");m(E," = ",D,r),this.selfconnected()?this.selfconnection.gater?m(D," = ",S," * ",M," * ",D," + ",z,r):m(D," = ",M," * ",D," + ",z,r):m(D," = ",z,r);for(var L in this.connections.inputs){var P=b((nt=this.connections.inputs[L]).from,"activation"),N=b(nt,"weight");if(nt.gater)Y=b(nt,"gain");this.connections.inputs[L].gater?m(D," += ",P," * ",N," * ",Y,r):m(D," += ",P," * ",N,r)}var x=b(this,"derivative");switch(this.squash){case t.squash.LOGISTIC:m(k," = (1 / (1 + Math.exp(-",D,")))",r),m(x," = ",k," * (1 - ",k,")",r);break;case t.squash.TANH:var A=b("aux"),R=b("aux_2");m(A," = Math.exp(",D,")",r),m(R," = 1 / ",A,r),m(k," = (",A," - ",R,") / (",A," + ",R,")",r),m(x," = 1 - (",k," * ",k,")",r);break;case t.squash.IDENTITY:m(k," = ",D,r),m(x," = 1",r);break;case t.squash.HLIM:m(k," = +(",D," > 0)",r),m(x," = 1",r);case t.squash.RELU:m(k," = ",D," > 0 ? ",D," : 0",r),m(x," = ",D," > 0 ? 1 : 0",r)}for(var q in this.trace.extended){var F=b("influences["+(Z=this.neighboors[q]).ID+"]"),C=b(Z,"old"),U=!1;Z.selfconnection.gater==this&&(m(F," = ",C,i),U=!0);for(var H in this.trace.influences[Z.ID]){var V=b(this.trace.influences[Z.ID][H],"weight"),G=b(this.trace.influences[Z.ID][H].from,"activation");U?m(F," += ",V," * ",G,i):(m(F," = ",V," * ",G,i),U=!0)}}for(var L in this.connections.inputs){if((nt=this.connections.inputs[L]).gater)var Y=b(nt,"gain");var P=b(nt.from,"activation"),B=b(this,"trace","elegibility",nt.ID,this.trace.elegibility[nt.ID]);this.selfconnected()?this.selfconnection.gater?nt.gater?m(B," = ",S," * ",M," * ",B," + ",Y," * ",P,i):m(B," = ",S," * ",M," * ",B," + ",P,i):nt.gater?m(B," = ",M," * ",B," + ",Y," * ",P,i):m(B," = ",M," * ",B," + ",P,i):nt.gater?m(B," = ",Y," * ",P,i):m(B," = ",P,i);for(var q in this.trace.extended){var F=b("influences["+(Z=this.neighboors[q]).ID+"]"),B=b(this,"trace","elegibility",nt.ID,this.trace.elegibility[nt.ID]),W=b(this,"trace","extended",Z.ID,nt.ID,this.trace.extended[Z.ID][nt.ID]);if(Z.selfconnected())var J=b(Z.selfconnection,"weight");if(Z.selfconnection.gater)var K=b(Z.selfconnection,"gain");Z.selfconnected()?Z.selfconnection.gater?m(W," = ",K," * ",J," * ",W," + ",x," * ",B," * ",F,i):m(W," = ",J," * ",W," + ",x," * ",B," * ",F,i):m(W," = ",x," * ",B," * ",F,i)}}for(var X in this.connections.gated)m(b(this.connections.gated[X],"gain")," = ",k,r)}if(!T){var Q=b(this,"error","responsibility",this.error.responsibility);if(j){m(Q," = ",b("target")," - ",k,o);for(var q in this.connections.inputs){B=b(this,"trace","elegibility",(nt=this.connections.inputs[q]).ID,this.trace.elegibility[nt.ID]);m(N=b(nt,"weight")," += ",I," * (",Q," * ",B,")",o)}l.push(k.id)}else if(_||O){if(O){m(Q," = 0",o);for(var q in this.connections.projected){var Z=(X=this.connections.projected[q]).to,$=b(X,"weight"),tt=b(Z,"error","responsibility",Z.error.responsibility);if(X.gater){var et=b(X,"gain");m(Q," += ",tt," * ",et," * ",$,o)}else m(Q," += ",tt," * ",$,o)}m(Q," *= ",x,o);for(var q in this.connections.inputs){B=b(this,"trace","elegibility",(nt=this.connections.inputs[q]).ID,this.trace.elegibility[nt.ID]);m(N=b(nt,"weight")," += ",I," * (",Q," * ",B,")",o)}}else if(_){m(Q," = 0",o);for(var q in this.trace.extended){var Z=this.neighboors[q],F=b("aux"),C=b(Z,"old");Z.selfconnection.gater==this?m(F," = ",C,o):m(F," = 0",o);for(var nt in this.trace.influences[Z.ID]){var $=b(X=this.trace.influences[Z.ID][nt],"weight"),rt=b(X.from,"activation");m(F," += ",$," * ",rt,o)}m(Q," += ",tt=b(Z,"error","responsibility",Z.error.responsibility)," * ",F,o)}m(Q," *= ",x,o);for(var q in this.connections.inputs){var nt=this.connections.inputs[q],it=b("aux");m(it," = 0",o);for(var q in this.trace.extended)m(it," += ",tt=b(Z=this.neighboors[q],"error","responsibility",Z.error.responsibility)," * ",W=b(this,"trace","extended",Z.ID,nt.ID,this.trace.extended[Z.ID][nt.ID]),o);m(N=b(nt,"weight")," += ",I," * ",it,o)}}}else{var ot=b("aux");for(var q in this.connections.projected){var Z=(X=this.connections.projected[q]).to,$=b(X,"weight"),tt=b(Z,"error","responsibility",Z.error.responsibility);X.gater?m(ot," += ",tt," * ",et=b(X,"gain")," * ",$,o):m(ot," += ",tt," * ",$,o)}var at=b(this,"error","projected",this.error.projected);m(at," = ",x," * ",ot,o),m(ot," = 0",o);for(var q in this.trace.extended){var Z=this.neighboors[q],F=b("aux_2"),C=b(Z,"old");Z.selfconnection.gater==this?m(F," = ",C,o):m(F," = 0",o);for(var nt in this.trace.influences[Z.ID])m(F," += ",$=b(X=this.trace.influences[Z.ID][nt],"weight")," * ",rt=b(X.from,"activation"),o);m(ot," += ",tt=b(Z,"error","responsibility",Z.error.responsibility)," * ",F,o)}var st=b(this,"error","gated",this.error.gated);m(st," = ",x," * ",ot,o),m(Q," = ",at," + ",st,o);for(var q in this.connections.inputs){nt=this.connections.inputs[q];m(it=b("aux")," = ",at," * ",B=b(this,"trace","elegibility",nt.ID,this.trace.elegibility[nt.ID]),o);for(var q in this.trace.extended)m(it," += ",tt=b(Z=this.neighboors[q],"error","responsibility",Z.error.responsibility)," * ",W=b(this,"trace","extended",Z.ID,nt.ID,this.trace.extended[Z.ID][nt.ID]),o);m(N=b(nt,"weight")," += ",I," * ",it,o)}}m(z," += ",I," * ",Q,o)}return{memory:a,neurons:s+1,inputs:c,outputs:l,targets:u,variables:h,activation_sentences:f,trace_sentences:p,propagation_sentences:d,layers:v}}}],[{key:"uid",value:function(){return s++}},{key:"quantity",value:function(){return{neurons:s,connections:o.connections}}}]),t}();u.squash=c,e.default=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){for(var e,n,r=t.length;r;e=Math.floor(Math.random()*r),n=t[--r],t[r]=t[e],t[e]=n);return t}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a={CROSS_ENTROPY:function(t,e){var n=0;for(var r in e)n-=t[r]*Math.log(e[r]+1e-15)+(1-t[r])*Math.log(1+1e-15-e[r]);return n},MSE:function(t,e){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(t[r]-e[r],2);return n/e.length},BINARY:function(t,e){for(var n=0,r=0;r<e.length;r++)n+=Math.round(2*t[r])!=Math.round(2*e[r]);return n}},s=function(){function t(e,n){r(this,t),n=n||{},this.network=e,this.rate=n.rate||.2,this.iterations=n.iterations||1e5,this.error=n.error||.005,this.cost=n.cost||null,this.crossValidate=n.crossValidate||null}return o(t,[{key:"train",value:function(e,n){var r,o,a,s=1,c=p=0,u=!1,l=n&&n.cost||this.cost||t.cost.MSE,h=!1,f=Date.now();if(n&&(n.iterations&&(this.iterations=n.iterations),n.error&&(this.error=n.error),n.rate&&(this.rate=n.rate),n.cost&&(this.cost=n.cost),n.schedule&&(this.schedule=n.schedule),n.customLog&&(console.log("Deprecated: use schedule instead of customLog"),this.schedule=n.customLog),(this.crossValidate||n.crossValidate)&&(this.crossValidate||(this.crossValidate={}),h=!0,n.crossValidate.testSize&&(this.crossValidate.testSize=n.crossValidate.testSize),n.crossValidate.testError&&(this.crossValidate.testError=n.crossValidate.testError))),r=this.rate,Array.isArray(this.rate))var p=Math.floor(this.iterations/this.rate.length);if(h){var d=Math.ceil((1-this.crossValidate.testSize)*e.length);a=e.slice(0,d),o=e.slice(d)}for(var v=0;!u&&c<this.iterations&&s>this.error&&!(h&&s<=this.crossValidate.testError);){var g=e.length;if(s=0,c++,p>0){var y=Math.floor(c/p);r=this.rate[y]||r}"function"==typeof this.rate&&(r=this.rate(c,v)),h?(this._trainSet(a,r,l),s+=this.test(o).error,g=1):(s+=this._trainSet(e,r,l),g=e.length),v=s/=g,n&&(this.schedule&&this.schedule.every&&c%this.schedule.every==0?u=this.schedule.do({error:s,iterations:c,rate:r}):n.log&&c%n.log==0&&console.log("iterations",c,"error",s,"rate",r),n.shuffle&&i(e))}return{error:s,iterations:c,time:Date.now()-f}}},{key:"trainAsync",value:function(t,e){var n=this.workerTrain.bind(this);return new Promise(function(r,i){try{n(t,r,e,!0)}catch(t){i(t)}})}},{key:"_trainSet",value:function(t,e,n){for(var r=0,i=0;i<t.length;i++){var o=t[i].input,a=t[i].output,s=this.network.activate(o);this.network.propagate(e,a),r+=n(a,s)}return r}},{key:"test",value:function(e,n){for(var r,i=0,o=n&&n.cost||this.cost||t.cost.MSE,a=Date.now(),s=0;s<e.length;s++)r=e[s].input,i+=o(e[s].output,this.network.activate(r));return{error:i/=e.length,time:Date.now()-a}}},{key:"workerTrain",value:function(t,e,n,r){r||console.warn("Deprecated: do not use `workerTrain`, use `trainAsync` instead.");var i=this;this.network.optimized||this.network.optimize();var o=this.network.worker(this.network.optimized.memory,t,n);o.onmessage=function(t){switch(t.data.action){case"done":var r=t.data.message.iterations,a=t.data.message.error,s=t.data.message.time;i.network.optimized.ownership(t.data.memoryBuffer),e({error:a,iterations:r,time:s}),o.terminate();break;case"log":console.log(t.data.message);case"schedule":n&&n.schedule&&"function"==typeof n.schedule.do&&(0,n.schedule.do)(t.data.message)}},o.postMessage({action:"startTraining"})}},{key:"XOR",value:function(e){if(2!=this.network.inputs()||1!=this.network.outputs())throw new Error("Incompatible network (2 inputs, 1 output)");var n={iterations:1e5,log:!1,shuffle:!0,cost:t.cost.MSE};if(e)for(var r in e)n[r]=e[r];return this.train([{input:[0,0],output:[0]},{input:[1,0],output:[1]},{input:[0,1],output:[1]},{input:[1,1],output:[0]}],n)}},{key:"DSR",value:function(e){var n,r,i,o,a,s=(e=e||{}).targets||[2,4,7,8],c=e.distractors||[3,5,6,9],u=e.prompts||[0,1],l=e.length||24,h=e.success||.95,f=e.iterations||1e5,p=e.rate||.1,d=e.log||0,v=e.schedule||{},g=e.cost||this.cost||t.cost.CROSS_ENTROPY;n=r=i=o=a=0;for(var y=1,b=s.length+c.length+u.length,m=Date.now();n<f&&(a<h||n%1e3!=0);){var w=[],_=l-u.length;for(i=0;i<_;i++){var O=Math.random()*c.length|0;w.push(c[O])}var T=[],j=[];for(i=0;i<u.length;i++)T.push(Math.random()*s.length|0),j.push(function t(e,n){var r=Math.random()*e|0,i=!1;for(var o in n)r==n[o]&&(i=!0);return i?t(e,n):r}(_,j));for(j=j.sort(),i=0;i<u.length;i++)w[j[i]]=s[T[i]],w.push(u[i]);var I,k=I=0;for(y=0,i=0;i<l;i++){var E=[];for(o=0;o<b;o++)E[o]=0;E[w[i]]=1;var D=[];for(o=0;o<s.length;o++)D[o]=0;i>=_&&(D[T[i-_]]=1);var z=this.network.activate(E);!function(t,e){for(var n in t)if(Math.round(t[n])!=e[n])return!1;return!0}(z,D)?this.network.propagate(p,D):i<_?I++:k++,y+=g(D,z),I+k==l&&r++}n%1e3==0&&(r=0);var S=++n%1e3;a=r/(S=0==S?1e3:S),y/=l,d&&n%d==0&&console.log("iterations:",n," success:",a," correct:",r," time:",Date.now()-m," error:",y),v.do&&v.every&&n%v.every==0&&v.do({iterations:n,success:a,error:y,time:Date.now()-m,correct:r})}return{iterations:n,success:a,error:y,time:Date.now()-m}}},{key:"ERG",value:function(e){var n=(e=e||{}).iterations||15e4,r=e.error||.05,i=e.rate||.1,o=e.log||500,a=e.cost||this.cost||t.cost.CROSS_ENTROPY,s=function(){this.paths=[]};s.prototype={connect:function(t,e){return this.paths.push({node:t,value:e}),this},any:function(){if(0==this.paths.length)return!1;var t=Math.random()*this.paths.length|0;return this.paths[t]},test:function(t){for(var e in this.paths)if(this.paths[e].value==t)return this.paths[e];return!1}};for(var c=function(){var t=new s,e=(new s).connect(t,"E"),n=(new s).connect(e,"S"),r=(new s).connect(e,"V").connect(n,"P"),i=(new s).connect(n,"X");i.connect(i,"S");var o=(new s).connect(r,"V");o.connect(o,"T"),n.connect(o,"X");var a=(new s).connect(i,"T").connect(o,"P");return{input:(new s).connect(a,"B"),output:t}},u=function(){var t=c(),e=c(),n=new s,r=(new s).connect(n,"E");t.output.connect(r,"T"),e.output.connect(r,"P");var i=(new s).connect(t.input,"P").connect(e.input,"T");return{input:(new s).connect(i,"B"),output:n}},l=function(){for(var t=u().input.any(),e="";t;)e+=t.value,t=t.node.any();return e},h=0,f=1,p={B:0,P:1,T:2,X:3,S:4,E:5},d=Date.now();h<n&&f>r;){var v=0;f=0;for(var g=l(),y=g.charAt(v),b=g.charAt(v+1);v<g.length-1;){for(var m=[],w=[],_=0;_<6;_++)m[_]=0,w[_]=0;m[p[y]]=1,w[p[b]]=1;var O=this.network.activate(m);(function(t,e){var n=0,r=-1,i=0,o=-1;for(var a in t)t[a]>n&&(n=t[a],r=a),e[a]>i&&(i=e[a],o=a);return r!=o})(O,w)&&this.network.propagate(i,w),y=g.charAt(++v),b=g.charAt(v+1),f+=a(w,O)}f/=g.length,++h%o==0&&console.log("iterations:",h," time:",Date.now()-d," error:",f)}return{iterations:h,error:f,time:Date.now()-d,test:function(t){for(var e=u().input,n=0,r=t.charAt(n);n<t.length;){var i=e.test(r);if(!i)return!1;e=i.node,r=t.charAt(++n)}return!0},generate:l}}},{key:"timingTask",value:function(e){if(2!=this.network.inputs()||1!=this.network.outputs())throw new Error("Invalid Network: must have 2 inputs and one output");void 0===e&&(e={});var n=e.iterations||200,r=e.error||.005,i=e.rate||[.03,.02],o=!1!==e.log&&(e.log||10),a=e.cost||this.cost||t.cost.MSE,s=function(t,e){for(var n=t+e,r=0,i=[],o=0;o<n;o++)i.push({input:[0,0],output:[0]});for(;r<n-20;){var a=Math.round(20*Math.random());i[r].input[0]=1;for(var s=r;s<=r+a;s++)i[s].input[1]=a/20,i[s].output[0]=.5;r+=a,a=Math.round(20*Math.random());for(var c=r+1;c<=r+a&&c<n;c++)i[c].input[1]=i[r].input[1];r+=a}for(var u=[],l=[],h=0;h<n;h++)(h<t?u:l).push(i[h]);return{train:u,test:l}}(e.trainSamples||7e3,e.trainSamples||1e3);return{train:this.train(s.train,{rate:i,log:o,iterations:n,error:r,cost:a}),test:this.test(s.test)}}}]),t}();s.cost=a,e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Architect=e.Network=e.Trainer=e.Layer=e.Neuron=void 0;var i=n(2);Object.defineProperty(e,"Neuron",{enumerable:!0,get:function(){return r(i).default}});var o=n(0);Object.defineProperty(e,"Layer",{enumerable:!0,get:function(){return r(o).default}});var a=n(3);Object.defineProperty(e,"Trainer",{enumerable:!0,get:function(){return r(a).default}});var s=n(1);Object.defineProperty(e,"Network",{enumerable:!0,get:function(){return r(s).default}});var c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(7));e.Architect=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e.connections=0,a=function(){function t(e,n,i){if(r(this,t),!e||!n)throw new Error("Connection Error: Invalid neurons");this.ID=t.uid(),this.from=e,this.to=n,this.weight=void 0===i?.2*Math.random()-.1:i,this.gain=1,this.gater=null}return i(t,null,[{key:"uid",value:function(){return e.connections=o+=1,o-1}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.connections=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),a=e.connections=0,s=function(){function t(e,n,i,a){if(r(this,t),this.ID=t.uid(),this.from=e,this.to=n,this.selfconnection=n==e,this.type=i,this.connections={},this.list=[],this.size=0,this.gatedfrom=[],void 0===this.type&&(this.type=e==n?o.default.connectionType.ONE_TO_ONE:o.default.connectionType.ALL_TO_ALL),this.type==o.default.connectionType.ALL_TO_ALL||this.type==o.default.connectionType.ALL_TO_ELSE)for(var s in this.from.list)for(var c in this.to.list){var u=this.from.list[s],l=this.to.list[c];if(this.type!=o.default.connectionType.ALL_TO_ELSE||u!=l){f=u.project(l,a);this.connections[f.ID]=f,this.size=this.list.push(f)}}else if(this.type==o.default.connectionType.ONE_TO_ONE)for(var h in this.from.list){var u=this.from.list[h],l=this.to.list[h],f=u.project(l,a);this.connections[f.ID]=f,this.size=this.list.push(f)}e.connectedTo.push(this)}return i(t,null,[{key:"uid",value:function(){return e.connections=a+=1,a-1}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(8);Object.defineProperty(e,"Perceptron",{enumerable:!0,get:function(){return r(i).default}});var o=n(9);Object.defineProperty(e,"LSTM",{enumerable:!0,get:function(){return r(o).default}});var a=n(10);Object.defineProperty(e,"Liquid",{enumerable:!0,get:function(){return r(a).default}});var s=n(11);Object.defineProperty(e,"Hopfield",{enumerable:!0,get:function(){return r(s).default}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(1)),c=r(n(0)),u=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=Array.prototype.slice.call(arguments);if(n.length<3)throw new Error("not enough layers (minimum 3) !!");for(var r=n.shift(),a=n.pop(),s=n,u=new c.default(r),l=[],h=new c.default(a),f=u,p=0;p<s.length;p++){var d=s[p],v=new c.default(d);l.push(v),f.project(v),f=v}return f.project(h),t.set({input:u,hidden:l,output:h}),t}return a(e,t),e}(s.default);e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(1)),c=r(n(0)),u=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=Array.prototype.slice.call(arguments);if(n.length<3)throw new Error("not enough layers (minimum 3) !!");var r=n.pop(),a={peepholes:c.default.connectionType.ALL_TO_ALL,hiddenToHidden:!1,outputToHidden:!1,outputToGates:!1,inputToOutput:!0};if("number"!=typeof r){s=n.pop();r.hasOwnProperty("peepholes")&&(a.peepholes=r.peepholes),r.hasOwnProperty("hiddenToHidden")&&(a.hiddenToHidden=r.hiddenToHidden),r.hasOwnProperty("outputToHidden")&&(a.outputToHidden=r.outputToHidden),r.hasOwnProperty("outputToGates")&&(a.outputToGates=r.outputToGates),r.hasOwnProperty("inputToOutput")&&(a.inputToOutput=r.inputToOutput)}else var s=r;for(var u=n.shift(),l=n,h=new c.default(u),f=[],p=new c.default(s),d=null,v=0;v<l.length;v++){var g=l[v],y=new c.default(g).set({bias:1}),b=new c.default(g).set({bias:1}),m=new c.default(g),w=new c.default(g).set({bias:1});f.push(y),f.push(b),f.push(m),f.push(w);var _=h.project(m);if(h.project(y),h.project(b),h.project(w),null!=d){var O=d.project(m);d.project(y),d.project(b),d.project(w)}var T=m.project(p),j=m.project(m);a.hiddenToHidden&&m.project(m,c.default.connectionType.ALL_TO_ELSE),a.outputToHidden&&p.project(m),a.outputToGates&&(p.project(y),p.project(w),p.project(b)),m.project(y,a.peepholes),m.project(b,a.peepholes),m.project(w,a.peepholes),y.gate(_,c.default.gateType.INPUT),b.gate(j,c.default.gateType.ONE_TO_ONE),w.gate(T,c.default.gateType.OUTPUT),null!=d&&y.gate(O,c.default.gateType.INPUT),d=m}return a.inputToOutput&&h.project(p),t.set({input:h,hidden:f,output:p}),t}return a(e,t),e}(s.default);e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(1)),c=r(n(0)),u=function(t){function e(t,n,r,a,s){i(this,e);for(var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),l=new c.default(t),h=new c.default(n),f=new c.default(r),p=h.neurons(),d=[],v=0;v<a;v++){var g=Math.random()*p.length|0,y=Math.random()*p.length|0,b=p[g].project(p[y]);d.push(b)}for(var m=0;m<s;m++){var w=Math.random()*p.length|0,b=Math.random()*d.length|0;p[w].gate(d[b])}return l.project(h),h.project(f),u.set({input:l,hidden:[h],output:f}),u}return a(e,t),e}(s.default);e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=r(n(1)),u=r(n(3)),l=r(n(0)),h=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=new l.default(t),a=new l.default(t);return r.project(a,l.default.connectionType.ALL_TO_ALL),n.set({input:r,hidden:[],output:a}),n.trainer=new u.default(n),n}return a(e,t),s(e,[{key:"learn",value:function(t){var e=[];for(var n in t)e.push({input:t[n],output:t[n]});return this.trainer.train(e,{iterations:5e5,error:5e-5,rate:1})}},{key:"feed",value:function(t){var e=this.activate(t),t=[];for(var n in e)t[n]=e[n]>.5?1:0;return t}}]),e}(c.default);e.default=h}])});